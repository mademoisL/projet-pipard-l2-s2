<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>Smart Park ‚Äì Profil</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../CSS/Style.css">
</head>

<body>


<!-- ================= NAVIGATION ================= -->

<nav>
    <div class="logo">SmartPark</div>
    <ul class="nav-links">
        <li><a href="#" onclick="logout()">D√©connexion</a></li>
        <li><a href="Abonnements.html">Nos abonnements</a></li>
        <li><a href="Presentation_des_appareils.html">Nos appareils</a></li>
        <li><a href="Nous.html">A propos de nous</a></li>
        <li><a href="Contacts.html">Contacts</a></li>
        <li><a href="Connexion.html">Connexion</a></li>
        <li><a href="Profil.html">Profil</a></li>
    </ul>
</nav>


<main>
<h1>Mon Profil</h1>

<div class="grid">

    <!-- --- INFOS PERSO --- -->
    <div class="card">
        <h3>Infos Personnelles</h3>
        <label>Nom</label>
        <input type="text" id="nom">
        <label>Pr√©nom</label>
        <input type="text" id="prenom">
        <label>Email</label>
        <input type="email" id="emailUser">
        <label>Mot de passe</label>
        <input type="password" id="passwordUser">
        <button onclick="saveInfos()">Enregistrer les modifications</button>
        <p><a href="#">Mot de passe oubli√© ?</a></p>
    </div>

    <!-- --- V√âHICULES --- -->
    <div class="card">
        <h3>Mes V√©hicules</h3>
        <table id="vehiculeTable">
            <thead>
                <tr>
                    <th>Immatriculation</th>
                    <th>Marque</th>
                    <th>Mod√®le</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <!-- v√©hicules ajout√©s dynamiquement -->
            </tbody>
        </table>

        <h4>Ajouter un v√©hicule</h4>
        <input type="text" id="newMatricule" placeholder="Immatriculation">
        <input type="text" id="newMarque" placeholder="Marque">
        <input type="text" id="newModele" placeholder="Mod√®le">
        <button onclick="addVehicule()">Ajouter</button>
    </div>

    <!-- --- CAPTEURS --- -->
    <div class="card">
        <h3>Acc√®s aux capteurs</h3>
        <ul id="capteursList">
            <!-- Capteurs ajout√©s dynamiquement -->
        </ul>
    </div>

    <!-- --- ACTIVIT√â --- -->
    <div class="card">
        <h3>Derni√®re Activit√©</h3>
        <div id="activiteList">
            <!-- Activit√© ajout√©e dynamiquement -->
        </div>
    </div>

</div>
</main>

<script>
// V√©rification connexion
if(localStorage.getItem("isLogged") !== "true") {
    window.location.href = "accueil.html";
}

// Remplir infos perso
document.getElementById("nom").value = localStorage.getItem("userName") || "";
document.getElementById("prenom").value = localStorage.getItem("userFirstName") || "";
document.getElementById("emailUser").value = localStorage.getItem("userEmail") || "";

// Sauvegarder modifications
function saveInfos(){
    localStorage.setItem("userName", document.getElementById("nom").value);
    localStorage.setItem("userFirstName", document.getElementById("prenom").value);
    localStorage.setItem("userEmail", document.getElementById("emailUser").value);
    alert("Modifications enregistr√©es !");
}

// Gestion v√©hicules
let vehicules = [
    {matricule:"AA-123-BB", marque:"Tesla", modele:"Model 3"}
];

function renderVehicules(){
    const tbody = document.getElementById("vehiculeTable").querySelector("tbody");
    tbody.innerHTML = "";
    vehicules.forEach((v,i)=>{
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${v.matricule}</td><td>${v.marque}</td><td>${v.modele}</td>
        <td><button onclick="deleteVehicule(${i})">Supprimer</button></td>`;
        tbody.appendChild(tr);
    });
}
function addVehicule(){
    const mat = document.getElementById("newMatricule").value;
    const marque = document.getElementById("newMarque").value;
    const modele = document.getElementById("newModele").value;
    if(mat && marque && modele){
        vehicules.push({matricule:mat, marque:marque, modele:modele});
        document.getElementById("newMatricule").value="";
        document.getElementById("newMarque").value="";
        document.getElementById("newModele").value="";
        renderVehicules();
        addActivity(`Ajout du v√©hicule ${mat}`);
    }
}
function deleteVehicule(index){
    addActivity(`Suppression du v√©hicule ${vehicules[index].matricule}`);
    vehicules.splice(index,1);
    renderVehicules();
}
renderVehicules();

// Capteurs
const capteurs = ["Capteur de pr√©sence au sol","Arceau motoris√©","Borne de recharge","Signal√©tique LED","Cam√©ra LAPI","Borne NFC / RFID","Bluetooth (localisation)","Scanner d‚Äôobstacles","Capteur de saturation","Capteur d√©passement dur√©e"];
const capteursList = document.getElementById("capteursList");
capteurs.forEach(c=>{
    const li = document.createElement("li");
    li.textContent = `üü¢ ${c} : Abonn√©`;
    capteursList.appendChild(li);
});

// Activit√©
const activiteList = document.getElementById("activiteList");
function addActivity(txt){
    const div = document.createElement("div");
    div.className = "activity-item";
    div.textContent = txt;
    activiteList.prepend(div);
}
addActivity("Connexion √† l'application");

// D√©connexion
function logout(){
    localStorage.removeItem("isLogged");
    window.location.href = "index.html";
}
</script>

<footer class="footer">
    <div class="footer-container">

        <div class="footer-section">
            <h4>Contact</h4>
            <p>contact@smartpark.com</p>
        </div>

        <div class="footer-section">
            <h4>Questions / R√©ponses</h4>
            <a href="FAQ.html">FAQ</a>
            <a href="AIDE.html">Centre d‚Äôaide</a>
        </div>

    </div>

    <div class="footer-bottom">
        ¬© 2026 Smart Park ‚Äî Gestion intelligente du stationnement urbain
    </div>

</footer>

</body>
</html>

